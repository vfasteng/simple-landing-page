<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8">
	<title>Builder / Assembler</title>
	<meta name="description" content="wip">

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
	<script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
	<script src="https://unpkg.com/aframe-orbit-controls@1.2.0/dist/aframe-orbit-controls.min.js"></script>
	
	<script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
	<script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
	<script src="https://unpkg.com/aframe-datgui-component/dist/aframe-datgui-component.min.js"></script>
	<script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
	<script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
	<script src="https://cdn.rawgit.com/gftruj/aframe-physics-spring/master/dist/aframe-spring.min.js"></script>
	<script src="https://unpkg.com/aframe-spherical-controls-component/dist/aframe-spherical-controls-component.min.js"></script>
	<script src="https://rawgit.com/chenzlabs/auto-detect-controllers/master/dist/aframe-auto-detect-controllers-component.min.js"></script>
	<script src="https://unpkg.com/aframe-gltf-helpers@0.0.2/dist/aframe-gltf-helpers.min.js"></script>
	<script src="https://rawgit.com/dbradleyfl/aframe-gridhelper/master/dist/aframe-gridhelper-component.min.js"></script>
	<script src="https://rawgit.com/dbradleyfl/aframe-selectable-light-component/master/dist/aframe-selectable-light-component.min.js"></script>
	<script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
	<script src="https://unpkg.com/aframe-csg-meshs/index.js"></script>
	
	<!--extras--
	<script src="js/aframe-master.min.js"></script>WONT RUN IF YOU REF IT HERE  BUT IT IS THERE-->
	<script src="js/aframe-extras.min.js"></script>
	<script src="js/aframe-extras.controls.mih.js"></script>
	<script src="js/aframe-extras.misc.js"></script>
	<script src="js/aframe-extras.loaders.js"></script>
	<script src="js/aframe-extras.pathfinding.js"></script>
	<script src="js/aframe-extras.primitives.js"></script>
	<script src="js/aframe-stl-model-component.min.js"></script>
	<script src="js/aframe-drag-and-drop-component.min.js"></script>
	<script src="js/aframe-crawling-cursor.min.js"></script>
	<script src="js/aframe-ui-modal-component.min.js"></script>
	<script src="js/mouse-dnd-component.js"></script>

	<!--reaction components-->
	<script src="js/clickable.js"></script>
	<script src="js/draggable.js"></script>
	<script src="js/drag-droppable.js"></script>
	<script src="js/hoverable.js"></script>
	<script src="js/stretchable.js"></script>
	<script src="js/droppable.js"></script>
	<script src="js/grabbable.js"></script>

	<link rel="stylesheet" type="text/css" href="aframe.css">
	
	<!-- controls for placing models--see gltf-helpers:bottomAlign: true-->
	<script id="tool" src="~/js/aframe-tool-component.js"></script>
	<script id="snap" src="~/js/snap.js"></script>
	<script id="grab" src="~/js/grab-lock.js"></script>
	<script id="physgrab" src="~/js/PhysicsGrab.js"></script>
	<script id="crecon" src="~/js/createConstraint.js"></script>
	<script id="devv" src="~/js/aframe-dev-components.min.js"></script>
	<script id="gload" src="~/js/gltfLoader.js"></script>
    <script id="part" src="~/js/GLTFPart.js"></script>
        
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
	<script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
	
	
        <style>
        button {
                width: 80px;
                height: 25px;
                position: relative;
                top: 1px;
                z-index: 2;
        }

                button c {
                        width: 20px;
                        height: 20px;
                        position: relative;
                        top: 1px;
                        z-index: 2;
                }
        </style>
        <style>
        #container {
                position: absolute;
                width: 80%;
                display: flex;
                justify-content: center;
        }

        #menny {
                position: absolute;
                width: 10%;
                margin:auto;
                height: 50%;
                display: flex;
                justify-content: center;
        }
        </style>

        <script type="text/javascript">
		if (window.AFRAME == null) {
			console.error("aframe not found, please import it before this component.")
		}

		AFRAME.registerSystem("track-cursor", {
			init: function () {
				this.el.setAttribute("cursor", { rayOrigin: "mouse" });
			}
		});

		AFRAME.registerComponent("track-cursor", {
			init: function () {
				this.el.addEventListener("mousedown", e => {
					if (this.el.is("cursor-hovered")) {
						this.el.sceneEl.camera.el.setAttribute("look-controls", {
							enabled: false
						});
						this.el.addState("dragging");
					}
				})
				this.el.addEventListener("click", e => {
					if (this.el.is("dragging")) {
						this.el.sceneEl.camera.el.setAttribute("look-controls", {
							enabled: true
						});
						this.el.removeState("dragging");
					}
				})
			},
		});

		AFRAME.registerComponent("dragndrop", {
			dependencies: ["track-cursor"],
			init: function () {
				this.range = 0;
				this.dist = 0;

				this.el.addEventListener("stateadded", e => {
					if (e.detail == "dragging") {
						this.range = 0;
						this.dist = this.el.object3D.position
							.clone()
							.sub(this.el.sceneEl.camera.el.object3D.position)
							.length();
					}
				})

				this.direction = new AFRAME.THREE.Vector3();
				this.target = new AFRAME.THREE.Vector3();
				document.addEventListener("wheel", e => {
					if (e.deltaY < 0) {
						this.range += 0.1;
					} else {
						this.range -= 0.1;
					}
				});
			},
			updateDirection: function () {
				this.direction.copy(this.el.sceneEl.getAttribute("raycaster").direction);
			},
			updateTarget: function () {
				let camera = this.el.sceneEl.camera.el
				this.target.copy(
					camera.object3D.position
						.clone()
						.add(this.direction.clone().multiplyScalar(this.dist + this.range))
				);
			},
			tick: function () {
				if (this.el.is("dragging")) {
					this.updateDirection();
					this.updateTarget();
					this.el.object3D.position.copy(this.target);
				}
			}
		});
	        </script>
        <script>
                AFRAME.registerComponent('click-impulse', {
                        init: function () {
                                var el = this.el;

                                el.addEventListener('click', function () {
                                        el.body.applyImpulse(
                                                /* impulse */
                                                new CANNON.Vec3(
                                                        THREE.Math.randInt(-20, 20),
                                                        THREE.Math.randInt(-20, 20),
                                                        THREE.Math.randInt(-20, 20)
                                                ),
                                                                                /* world position */ new CANNON.Vec3().copy(el.getDOMAttribute('position'))
                                        );
                                });

                        }
                });

                // forward mouse and touch events to the super-hands entity
                        AFRAME.registerComponent('capture-mouse', {
                                init: function () {
                                        this.eventRepeater = this.eventRepeater.bind(this)
                                        this.el.sceneEl.addEventListener('loaded', () => {
                                                this.el.sceneEl.canvas.addEventListener('mousedown', this.eventRepeater)
                                                this.el.sceneEl.canvas.addEventListener('mouseup', this.eventRepeater)
                                                this.el.sceneEl.canvas.addEventListener('touchstart', this.eventRepeater)
                                                this.el.sceneEl.canvas.addEventListener('touchmove', this.eventRepeater)
                                                this.el.sceneEl.canvas.addEventListener('touchend', this.eventRepeater)
                                        }, { once: true })
                                },
                                eventRepeater: function (evt) {
                                        if (evt.type.startsWith('touch')) {
                                                evt.preventDefault()
                                                // avoid repeating touchmove because it interferes with look-controls
                                                if (evt.type === 'touchmove') { return }
                                        }
                                        this.el.emit(evt.type, evt.detail)
                                }
                        })
        </script>
        
		
	</head>
	<body>
		<script>
                function setpartOrigin(target) {
                        target.setAttribute('position', 'rotation', x, y, z, w);
                        // position selected part
                }
        </script>	
		<script>
			function exportpartinc() {
				//set the parent entity or place the assembly templat

				//get assembly-plane element position rotation and scale

				//get assembly planeÂ´s final position relative to the part origim

				//set the position of the part

				//set the constraints and limits of movement

				//animate the motion

				document.getElementById('p1')

				
			}
		</script>	
		<script>
			function setpartOrigin(target) {
					target.setAttribute('position', 'rotation', x, y, z, w);
					// color randomizer credit: http://stackoverflow.com/a/7638362
			}
		</script>	
		<script>
			function setpartOrigin(target) {
					target.setAttribute('position', 'rotation', x, y, z, w);
					// color randomizer credit: http://stackoverflow.com/a/7638362
			}
		</script>	




  <script>
		var changesphere = function () {
			console.log(document.querySelector("a-sphere").getAttribute("color"))
			if (document.querySelector("a-sphere").getAttribute("color") !== "blue") {
				document.querySelector("a-sphere").setAttribute("color", "blue");
			} else {
				document.querySelector("a-sphere").setAttribute("color", "green");

			}
		}
		var changecylinder = function () {
			console.log(document.querySelector("a-cylinder").getAttribute("color"))
			if (document.querySelector("a-cylinder").getAttribute("color") !== "blue") {
				document.querySelector("a-cylinder").setAttribute("color", "blue");
			} else {
				document.querySelector("a-cylinder").setAttribute("color", "green");

			}
		}

		

	</script>

	
<div id="container" aligncontent="center">
	<button id="physicstoggle" top="10px" onclick="physicsonoff()">
		physics
	</button>
	<button id="changecylinder" top="10px" onclick="changecylinder()">
		cylinder
	</button>
	<button id="changesphere" top="10px" onclick="changesphere()">
		sphere
	</button>
	<button id="insertpart" top="10px" onclick="insertpart()">
		part
	</button>
	<button id="insertjoint" top="10px" onclick="insertjoint()">
		joint
	</button>
	<button id="selectactivepart" top="10px" onclick="selectactivepart()">
		active
	</button>
	<button id="configpart" top="10px" onclick="configpart()">
		config
	</button>
	<button id="animenv" top="10px" onclick="animenv()">
		animate
	</button>
	<button id="simenv" top="10px" onclick="configtable()">
		simulate
	</button>
	<button id="recordd" top="10px" onclick="recordd()">
		record
	</button>
</div>
<a-scene physics="gravity:-9.81;friction:0" >
	<a-assets>
		<a-asset-item id="prt1" src="#Body1"></a-asset-item>
		<a-asset-item id="prt2" src="#Body2"></a-asset-item>
		<a-asset-item id="prt3" src="#Body3"></a-asset-item>
		<a-asset-item id="prt4" src="#Body4"></a-asset-item>
		<a-asset-item id="prt5" src="#Body5"></a-asset-item>
		<a-asset-item id="prt6" src="#Body6"></a-asset-item>
		<a-asset-item id="prt7" src="#Body7"></a-asset-item>
		<a-asset-item id="prt8" src="#Body8"></a-asset-item>
		<a-asset-item id="prt9" src="#Body9"></a-asset-item>
		<a-asset-item id="prt0" src="#Body0"></a-asset-item>
		
		<a-mixin id="mix01" dynamic-body="shape: box; mass: 1.5;linearDamping: 0.05;angularDamping:0.05"></a-mixin>
		<a-mixin id="mix02" dynamic-body="shape: cylinder; cylinderAxis:y; mass: 1.5;linearDamping: 0.05;angularDamping:0.05"></a-mixin>
		<a-mixin id="mix03" src="#"></a-mixin>
		<a-mixin id="mix04" src="#"></a-mixin>
		<a-mixin id="mix05" src="#"></a-mixin>
		<a-mixin id="mix06" src="#"></a-mixin>
		<a-mixin id="mix07" src="#"></a-mixin>
		<a-mixin id="mix08" src="#"></a-mixin>
		<a-mixin id="mix09" src="#"></a-mixin>
		<a-mixin id="mix00" src="#"></a-mixin>
		
		<a-asset-item id="in3sp" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fiin3speed.glb?v=1601200846073"></a-asset-item>
			<a-asset-item id="ou3sp" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fout3speed.glb?v=1601200880607"></a-asset-item>

			<a-asset-item id="113" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F113.glb?v=1608589867300"></a-asset-item>
			<a-asset-item id="114" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F114.glb?v=1608589893609"></a-asset-item>
			<a-asset-item id="115" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F115.glb?v=1608589930623"></a-asset-item>
			<a-asset-item id="116" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F116.glb?v=1608589976641"></a-asset-item>
			<a-asset-item id="117" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F117.glb?v=1608590067493"></a-asset-item>
			<a-asset-item id="cadboxx-std" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fcadboxx-standard.glb?v=1618293365748"></a-asset-item>
			<a-asset-item id="cadboxx-three" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fcadboxxthree.glb?v=1618302772439"></a-asset-item>

			<!---<a-asset-item id="" src=""></a-asset-item>--
			<img id="imm1" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Ftexture.PNG?v=1633143378841">
			<a-asset-item id="xx" src=""></a-asset-item>			
-->
<img id="imm1" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Ftexture.PNG?v=1633143378841">
			<a-asset-item id="gg01" src="#"></a-asset-item>
			<a-asset-item id="gg02" src="#"></a-asset-item>
			<a-asset-item id="gg03" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fblack-tyre.glb?v=1633144010822"></a-asset-item>
			<a-asset-item id="gg04" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fcccpin.glb?v=1632902439472"></a-asset-item>
			<a-asset-item id="gg05" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2F6waypin.glb?v=1633418714106"></a-asset-item>
			<a-asset-item id="gg06" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Foctahedron.glb?v=1634979729438"></a-asset-item>
			<a-asset-item id="gg07" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fplanex1sq.glb?v=1635660167471"></a-asset-item>
			<a-asset-item id="gg08" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Faxle1sq1.glb?v=1635660105710"></a-asset-item>
			<a-asset-item id="gg09" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fhand.glb?v=1635661031408"></a-asset-item>
			<a-asset-item id="gg010" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fbignsmall.glb?v=1635661253048"></a-asset-item>
			<a-asset-item id="gg011" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fmiddle.glb?v=1635661365123"></a-asset-item>
			<a-asset-item id="gg012" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Ftip.glb?v=1635661448663"></a-asset-item>
			<a-asset-item id="gg013" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Foctahedron.glb?v=1634979729438"></a-asset-item>
			<a-asset-item id="gg014" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Ftet-block-rad1-p000.glb?v=1631529314495"></a-asset-item>
			<a-asset-item id="gg015" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fshaftflange.glb?v=1636527093706"></a-asset-item>
			<a-asset-item id="gg016" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fholedflange.glb?v=1636526609824"></a-asset-item>
			<a-asset-item id="gg017" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fdiff-case.glb?v=1636526344334"></a-asset-item>
			<a-asset-item id="gg018" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fhalfl.glb?v=1636526496208"></a-asset-item>
			<a-asset-item id="gg019" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fgearboxx.glb?v=1636526208096"></a-asset-item>
			<a-asset-item id="gg020" src="https://cdn.glitch.me/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fbobpin.glb?v=1636534604646"></a-asset-item>
			<a-asset-item id="gg021" src="#"></a-asset-item>
			<a-asset-item id="gg022" src="#"></a-asset-item>
			<a-asset-item id="gg023" src="#"></a-asset-item>
			<a-asset-item id="gg024" src="#"></a-asset-item>
			<a-asset-item id="gg025" src="#"></a-asset-item>
			<a-asset-item id="gg026" src="#"></a-asset-item>


			<a-asset-item id="chlink1" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fchink1.glb?v=1606822463366"></a-asset-item>
			<a-asset-item id="chlink2" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fchink2.glb?v=1606822434718"></a-asset-item>
			<a-asset-item id="layplane" geometry="primitive: plane; side: double; material.color:red; material.wireframe:true;"></a-asset-item>
			<a-mixin id="gltf-util" gltf-helpers="buffer:false; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>

			<!---->
			<a-mixin id="gltf-util-1" gltf-helpers="buffer:false; name:prt1; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-2" gltf-helpers="buffer:false; name:prt2; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-3" gltf-helpers="buffer:false; name:prt3; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-4" gltf-helpers="buffer:false; name:prt4; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-5" gltf-helpers="buffer:false; name:prt5; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-6" gltf-helpers="buffer:false; name:prt6; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-7" gltf-helpers="buffer:false; name:prt7; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-8" gltf-helpers="buffer:false; name:prt8; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>
			<a-mixin id="gltf-util-9" gltf-helpers="buffer:false; name:prt9; src:selector; resetPosition:true; model-center:bottomAlign:true"></a-mixin>

               <a-mixin id="cube" geometry="primitive: box; width: 1.0; height: 1.0; depth: 1.0"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="cyll" geometry="primitive: cylinder; radius: 0.5; height: 1.0"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="sphh" geometry="primitive: sphere; radius: 0.5"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="octt" geometry="primitive: octahedron; radius: 0.5"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="dodd" geometry="primitive: dodecahedron; radius: 0.5"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="tett" geometry="primitive: tetrahedron; radius: 0.5"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="tria" geometry="primitive: triangle" material="side: double"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="toru" geometry="primitive: torus; radius: .5; radiusTubular: 0.15; arc: 360"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="plan" geometry="primitive: plane; side:double; height: 1.0; width: 1.0"
                                material="side: double" hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="cone" geometry="primitive: cone; radiusBottom: 0.6; radiusTop: 0.3"
                                hoverable grabbable stretchable draggable droppable
                                dynamic-body shadow>
               </a-mixin>
               <a-mixin id="voxel"
                                geometry="primitive: box; width: 0.5; height: 0.0001; depth: 0.5"
                                intersection-spawn="event: click; mixin: voxel; material.color: green"
                                snap="offset: 0.25 0.25 0.25; snap: 0.5 0.5 0.5"
                                event-set__mouseenter="material.opacity: 0.7"
                                event-set__mouseleave="material.opacity: 1.0"
                                event-set__dragover-start="material.wireframe: true"
                                event-set__dragover-end="material.wireframe: false"></a-mixin>

               <a-mixin id="ch1"
                                gltf-model="#chlink1"
                                material="color: #645146"
                                scale="1 1 1"
                                random-position="min: -5 0 -5; max: 5 0 5"
                                look-at="#cameraRig"></a-mixin>


               <a-mixin id="gglb" geometry="gltf-model: model;"
                                hoverable grabbable stretchable draggable droppable
                                event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                                event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                                dynamic-body shadow>
               </a-mixin>
			<a-mixin id="controller" super-hands="colliderEvent: collisions;
					colliderEventProperty: els;
					colliderEndEvent: collisions;
					colliderEndEventProperty: clearedEls;
					grabStartButtons: gripdown, pointdown, triggerdown;
					grabEndButtons: gripup, pointup, triggerup"></a-mixin>
			<!--	 static-body="shape: sphere; sphereRadius: 0.11"
					 oculus-touch-controls="hand: left" physics-collider
					 collision-filter="collidesWith: default;" collisionForces="false">
			-->

			<a-mixin id="constraint_hinge" constraint="type: hinge;axis:0 1 0;targetAxis:0 1 0;pivot:0 0 0;targetPivot:0 0 0"></a-mixin>
			<a-mixin id="constraint_distance" constraint="type: distance;pivot:0 0 0;targetPivot:0 0 0"></a-mixin>
			<a-mixin id="constraint_slider" constraint="type: slider;axis:0 1 0;targetAxis:0 1 0;pivot:0 0 0;targetPivot:0 0 0"></a-mixin>
			<a-mixin id="constraint_lock" constraint="type: lock;pivot:0 0 0;targetPivot:0 0 0"></a-mixin>
			<a-mixin id="constraint_pointTopoint" constraint="type: pointTopoint;axis:0 1 0;targetAxis:0 1 0;pivot:0 0 0;targetPivot:0 0 0"></a-mixin>

			<a-mixin id="weight1" mass="1.0"></a-mixin>
			<a-mixin id="weight2" mass="2.0"></a-mixin>
			<a-mixin id="weight4" mass="4.0"></a-mixin>
			<a-mixin id="weight8" mass="8.0"></a-mixin>
			<a-mixin id="weight16" mass="16.0"></a-mixin>
			<a-mixin id="weight32" mass="32.0"></a-mixin>

			<img id="im1" src="../images/boxx1.png" />
			<img id="im2" src="../images/Enginewo.png" />
			<img id="im3" src="../images/cadboxxstd.png" />
			<img id="im4" src="../images/posx.jpg" />
			<img id="im5" src="../images/posy.jpg" />
			<img id="im6" src="../images/posz.jpg" />
			<img id="im7" src="../images/negx.jpg" />
			<img id="im8" src="../images/negy.jpg" />
			<img id="im9" src="../images/negz.jpg" />
	</a-assets>
	
	<!--cadboxx walls, floor and lighting-->
      <a-entity id="planeboxx" position="0 0 0" scale="1 1 1">
        <a-entity id="planeboxx" position="0 0 0">
            <a-entity id="planebox" position="0 0 0">
                <a-plane side="double" color="green" position="0 -20 0" rotation="-90 0 0" height="40" width="40" material="" static-body></a-plane>
                <a-plane side="double" color="green" position="0 20 0" rotation="-90 0 0" height="40" width="40" material="" static-body></a-plane>
                <a-plane side="double" color="blue" position="0 0 20" rotation="0 0 0" height="40" width="40" material="" static-body></a-plane>
                <a-plane side="double" color="blue" position="0 0 -20" rotation="0 0 0" height="40" width="40" material="" satic-body></a-plane>
                <a-plane side="double" color="red" position="20 0 0" rotation="0 -90 0" height="40" width="40" material="" static-body></a-plane>
                <a-plane side="double" color="red" position="-20 0 0" rotation="0 90 0" height="40" width="40" material="" static-body></a-plane>
            </a-entity>
            <!--mesh overlay for walls-->
            <a-box position="0 -20 0" rotation="0 0 0" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>
            <a-box position="0 20 0" rotation="0 0 0" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>
            <a-box position="0 0 -20" rotation="90 0 0" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>
            <a-box position="0 0 20" rotation="90 0 0" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>
            <a-box position="-20 0 0" rotation="0 0 90" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>
            <a-box position="20 0 0" rotation="0 0 90" width="40" depth="40" height="0.2" color="lightblue" opacity=".05" gridhelper="size: 40;divisions:5" static-body></a-box>

            <a-box id="ground" position="0 -0.001 0" rotation="0 0 0" width="40" depth="40" height="0.002" color="lightblue" opacity=".25" gridhelper="size: 40;divisions:20;colorCenterLine:red" static-body></a-box>
            
            <a-light type="hemisphere" intensity="2.0"></a-light>
        </a-entity>

      <a-entity>
	
	<a-entity id="assy-planes" position="0 2.5 0" rotation="-90 0 0" layout="type: circle; radius: 2.5">
                <a-plane id="pl1" side="double" color="black" rotation="0 0 0" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl2" side="double" color="black" rotation="0 0 40" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl3" side="double" color="black" rotation="0 0 80" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl4" side="double" color="black" rotation="0 0 120" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl5" side="double" color="black" rotation="0 0 160" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl6" side="double" color="black" rotation="0 0 200" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl7" side="double" color="black" rotation="0 0 240" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl8" side="double" color="black" rotation="0 0 280" opacity="0.25" static-body ></a-plane>
                <a-plane id="pl9" side="double" color="black" rotation="0 0 320" opacity="0.25" static-body ></a-plane>

        </a-entity>
	
	<a-entity id="p1" position="5 3 0" rotation="0 0 0">
		<a-entity id="bottom-square" gltf-model="#cb1" position="0 0 0" rotation="0 0 0" scale="1 1 1" dynamic-body click-impulse>

		</a-entity>
		<a-entity id="top-hex" gltf-model="#ccyl1" position="0 2.5 0" rotation="0 0 0" scale="2 2 2"
				  constraint="type:hinge;target:#bottom-square;axis:0 1 0;targetAxis:0 1 0;pivot:0 0 0;targetPivot:0 2.5 0"
				  dynamic-body click-impulse>

		</a-entity>
		
	</a-entity>
        <!--<a-entity id="boxx-outers" position="0 0 0" rotation="0 0 0" >
                <a-box id="b1" position="0 10.5 0" color="green" width="20" height="1.0" depth="20" opacity="1"></a-box>
				
                <a-box id="b2" position="0 -10.5 0" color="green" width="20" height="1.0" depth="20" opacity="1"></a-box>
                <a-box id="b3" position="10.5 0 0" color="red" width="1.0" height="20" depth="20" opacity="1"></a-box>
                <a-box id="b4" position="-10.5 0 0" color="red" width="1.0" height="20" depth="20" opacity="1"></a-box>
                <a-box id="b5" position="0 0 10.5" color="blue" width="20" height="20.0" depth="1" opacity="1"></a-box>
                <a-box id="b6" position="0 0 -10.5" color="blue" width="20" height="20.0" depth="1" opacity="1"></a-box>

        </a-entity>

		<a-entity id="boxx-inners" position="0 0 0" rotation="0 0 0" >
                <a-box id="b11" position="0 9.5 0" color="yellow" width="15" height=".5" depth="15" opacity="1"></a-box>
				
                <a-box id="b21" position="0 -9.5 0" color="yellow" width="15" height=".5" depth="15" opacity="1"></a-box>
                <a-box id="b31" position="9.5 0 0" color="yellow" width=".5" height="15" depth="15" opacity="1"></a-box>
                <a-box id="b41" position="-9.5 0 0" color="yellow" width=".5" height="15" depth="15" opacity="1"></a-box>
                <a-box id="b51" position="0 0 9.5" color="yellow" width="15" height="15.0" depth=".5" opacity="1"></a-box>
                <a-box id="b61" position="0 0 -9.5" color="yellow" width="15" height="15.0" depth=".5" opacity="1"></a-box>

        </a-entity>
		
		<a-entity id="boxx-spinners" position="0 0 0" rotation="0 0 0" >
                <a-box id="b111" position="0 8.5 0" color="green" width="10" height=".5" depth="10" opacity="1"></a-box>
				
                <a-box id="b211" position="0 -8.5 0" color="green" width="10" height=".5" depth="10" opacity="1"></a-box>
                <a-box id="b311" position="8.5 0 0" color="red" width=".5" height="10" depth="10" opacity="1"></a-box>
                <a-box id="b411" position="-8.5 0 0" color="red" width=".5" height="10" depth="10" opacity="1"></a-box>
                <a-box id="b511" position="0 0 8.5" color="blue" width="10" height="10.0" depth=".5" opacity="1"></a-box>
                <a-box id="b611" position="0 0 -8.5" color="blue" width="10" height="10.0" depth=".5" opacity="1"></a-box>

        </a-entity>-->
		
		<a-gui-flex-container 
                        flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="3.0" height="8.5" 
                        panel-color="#072B73" 
                        panel-rounded="0.2"
                        position="2.5 10 -19" rotation="0 0 0">
			<a-gui-radio 
			width="2.0" height="0.65"
			onclick="toggleActionFunction"
			value="label radio"
			font-family="Arial"
			margin="0 0 0.05 0"
		    >
		    </a-gui-radio>
		    <a-gui-radio 
			    width="2.0" height="0.65"
			    onclick="toggleActionFunction"
			    value="label radio"
			    font-family="Arial"
			    margin="0 0 0.05 0"
			>
			</a-gui-radio>
				<a-gui-radio 
				width="2.0" height="0.65"
				onclick="toggleActionFunction"
				value="label radio"
				font-family="Arial"
				margin="0 0 0.05 0"
				>
				</a-gui-radio>
						<a-gui-radio 
						width="2.0" height="0.65"
						onclick="toggleActionFunction"
						value="label radio"
						font-family="Arial"
						margin="0 0 0.05 0"
					>
					</a-gui-radio>
						<a-gui-radio 
						width="2.0" height="0.65"
						onclick="toggleActionFunction"
						value="label radio"
						font-family="Arial"
						margin="0 0 0.05 0"
						>
						</a-gui-radio>
						
						<a-gui-toggle
							width="2.0" height="0.65"
							onclick="testToggleAction"
							value="Slider"
							font-family="Arial"
							margin="0 0 0.05 0"
						>
						</a-gui-toggle>
					<a-gui-toggle
						width="2.0" height="0.65"
						onclick="testToggleAction"
						value="Solid"
						font-family="Arial"
						margin="0 0 0.05 0"
					>
					</a-gui-toggle>
				<a-gui-toggle
				width="2.0" height="0.65"
				onclick="testToggleAction"
				value="label toggle"
				font-family="Arial"
				margin="0 0 0.05 0"
				>
				</a-gui-toggle>
			<a-gui-toggle
			    width="2.0" height="0.65"
			    onclick="testToggleAction"
			    value="label toggle"
			    font-family="Arial"
			    margin="0 0 0.05 0"
			>
			</a-gui-toggle>
		    <a-gui-toggle
			width="2.0" height="0.65"
			onclick="testToggleAction"
			value="label toggle"
			font-family="Arial"
			margin="0 0 0.05 0"
		    >
		    </a-gui-toggle>
                        </a-gui-flex-container>
                        <a-gui-flex-container 
                        flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="2.5" height="8.5" 
                        panel-color="#072B73" 
                        panel-rounded="0.2"
                                position="-0.5 10 -19" rotation="0 0 0">
                                
				
			
                           <a-gui-radio 
                                width="2.0" height="0.65"
                                onclick="toggleActionFunction"
                                value="Slider"
                                font-family="Arial"
                                margin="0 0 0.05 0"
                            >
                            </a-gui-radio>
                            <a-gui-radio 
				    width="2.0" height="0.65"
				    onclick="toggleActionFunction"
				    value="Solid"
				    font-family="Arial"
				    margin="0 0 0.05 0"
				>
				</a-gui-radio>
					<a-gui-radio 
					width="2.0" height="0.65"
					onclick="toggleActionFunction"
					value="Facet"
					font-family="Arial"
					margin="0 0 0.05 0"
					>
					</a-gui-radio>
							<a-gui-radio 
							width="2.0" height="0.65"
							onclick="toggleActionFunction"
							value="Edge"
							font-family="Arial"
							margin="0 0 0.05 0"
						>
						</a-gui-radio>
							<a-gui-radio 
							width="2.0" height="0.65"
							onclick="toggleActionFunction"
							value="Vertex"
							font-family="Arial"
							margin="0 0 0.05 0"
							>
							</a-gui-radio>
							
							<a-gui-toggle
								width="2.0" height="0.65"
								onclick="testToggleAction"
								value="Shade"
								font-family="Arial"
								margin="0 0 0.05 0"
							>
							</a-gui-toggle>
						<a-gui-toggle
							width="2.0" height="0.65"
							onclick="testToggleAction"
							value="Normals"
							font-family="Arial"
							margin="0 0 0.05 0"
						>
						</a-gui-toggle>
					<a-gui-toggle
					width="2.0" height="0.65"
					onclick="testToggleAction"
					value="Outline"
					font-family="Arial"
					margin="0 0 0.05 0"
					>
					</a-gui-toggle>
				<a-gui-toggle
				    width="2.0" height="0.65"
				    onclick="testToggleAction"
				    value="Grid"
				    font-family="Arial"
				    margin="0 0 0.05 0"
				>
				</a-gui-toggle>
                            <a-gui-toggle
                                width="2.0" height="0.65"
                                onclick="testToggleAction"
                                value="Clear"
                                font-family="Arial"
                                margin="0 0 0.05 0"
                            >
                            </a-gui-toggle>
                        </a-gui-flex-container>
		<a-gui-flex-container 
                        flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="2.0" height="8.5" 
                        panel-color="#072B73" 
                        panel-rounded="0.2"
                                position="-3.0 10 -19" rotation="0 0 0">
                        <a-gui-button mouse-cursor
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="Create"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="Create"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
        <a-gui-button
        width="1.5" 
        height="0.7" 
        base-depth="0.025" 
        depth="0.1"
        gap="0.2"

        onclick="buttonActionFunction" key-code="32"
        value="Convert"
        font-family="assets/fonts/PermanentMarker-Regular.ttf"	
        font-size="0.35"
        margin="0 0 0.05 0"

        font-color="black"
        active-color="red"
        hover-color="yellow"
        border-color="white"
        focus-color="black"
        background-color="orange"

        bevel="true"
>
</a-gui-button>
				
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="CSG"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
				
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="Merge"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>

				<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="Origin"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
				
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="Face"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
				
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="function setAxisandpoint()" key-code="32"
		value="Axis/Pt"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
			
                                <a-gui-button
                                width="1.5" 
                                height="0.7" 
                                base-depth="0.025" 
                                depth="0.1"
                                gap="0.2"
                
                                onclick="function motionofPart()" key-code="32"
                                value="Motion"
                                font-family="assets/fonts/PermanentMarker-Regular.ttf"	
                                font-size="0.35"
                                margin="0 0 0.05 0"
                
                                font-color="black"
                                active-color="red"
                                hover-color="yellow"
                                border-color="white"
                                focus-color="black"
                                background-color="orange"
                
                                bevel="true"
                        >
                        </a-gui-button>
	
	<a-gui-button
		width="1.5" 
		height="0.7" 
		base-depth="0.025" 
		depth="0.1"
		gap="0.2"

		onclick="buttonActionFunction" key-code="32"
		value="ClickMe"
		font-family="assets/fonts/PermanentMarker-Regular.ttf"	
		font-size="0.35"
		margin="0 0 0.05 0"

		font-color="black"
		active-color="red"
		hover-color="yellow"
		border-color="white"
		focus-color="black"
		background-color="orange"

		bevel="true"
	>
	</a-gui-button>
</a-gui-flex-container>




		<a-entity id="mm1" position="-2 2 0" rotation="0 0 0" dynamic-body >
			<a-box color="red" ></a-box>
		</a-entity>
		<a-entity id="mm2" position="0 2 0" rotation="0 0 0" dynamic-body >
			<a-cylinder color="blue"></a-cylinder>
		</a-entity>
		<a-entity id="mm3" position="2 2 0" rotation="0 0 0" dynamic-body >
			<a-sphere color="green" ></a-sphere>
		</a-entity>



        <!--cameras AND LIGHT--><!--templates, superhands, websurfaces, layout, spawn, load ftp, teleporter-cursor, joints, datgui-->
	<a-entity light="type: hemisphere; color: #33C; groundColor: #3C3; intensity: 2"></a-entity>
	<!--camera rig-->
	<a-entity id="main-camera">
	        <a-entity camera look-controls orbit-controls="target: 0 0 0; minDistance: 0.2; maxDistance: 9.0; initialPosition: 6 0 6";active:false></a-entity>
	</a-entity>
        <a-entity id="second-camera">
	        <a-entity camera look-controls orbit-controls="target: 0 0 0; minDistance: 0.2; maxDistance: 9.0; initialPosition: 0 2 0"; active:true></a-entity>
	</a-entity>
        <!--<a-entity id="cam3">
	        <a-entity camera look-controls orbit-controls="target: 0 0 -7.5; minDistance: 0.2; maxDistance: 9.0; initialPosition: 0 2 0"></a-entity>
	</a-entity>
        <a-entity id="cam4">
	        <a-entity camera look-controls orbit-controls="target: -7.5 0 0; minDistance: 0.2; maxDistance: 9.0; initialPosition: 0 2 0"></a-entity>
	</a-entity>
        <a-entity id="cam5">
	        <a-entity camera look-controls orbit-controls="target: 0 7.5 0; minDistance: 0.2; maxDistance: 9.0; initialPosition: 0 2 0"></a-entity>
	</a-entity>
        <a-entity id="cam6">
	        <a-entity camera look-controls orbit-controls="target: 0 7.5 0; minDistance: 0.2; maxDistance: 9.0; initialPosition: 0 0 0"></a-entity>
	</a-entity>-->
	<a-box id="stopper" position="0 0 0" color="yellow" width="15" height="0.0001" depth="15" opacity="0.1" gridhelper="size:15;divisions:15" ></a-box>
				
	<!--<a-plane id="pm" rotation="-90 0 0" scale="15 15 15" side="double" color="yellow" opacity="0.2" ></a-plane>
	--><a-sky color="lightblue"></a-sky>
</a-scene>
        <script>
        function exportGLTF(input, options) {
            AFRAME.scenes[0].systems['gltf-exporter'].export(input, options);
        }

        document.getElementById('export-scene').addEventListener('click', function () {
            exportGLTF();
        });

        document.getElementById('export-scene-bin').addEventListener('click', function () {
            exportGLTF(undefined, { binary: true });
        });

        document.getElementById('export-redbxx').addEventListener('click', function () {
            exportGLTF(document.getElementById('redbxx'), { binary: true });
        });

        document.getElementById('export-redbyy').addEventListener('click', function () {
            exportGLTF(document.getElementById('redbyy'), { binary: true });
        });

        document.getElementById('export-redbzz').addEventListener('click', function () {
            exportGLTF(document.getElementById('redbzz'), { binary: true });
        });

        document.getElementById('bbttnn1').addEventListener('click', function () {
            exportGLTF(document.getElementById('p1'), { binary: true });
        });

        document.getElementById('export-selector').addEventListener('click', function () {
            exportGLTF(document.querySelectorAll("[geometry='primitive: box']"));
        });

    </script>
	</body>
</html>
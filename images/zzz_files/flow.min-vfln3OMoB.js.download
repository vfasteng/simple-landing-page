define(["require","exports","tslib","react","modules/core/i18n","modules/core/browser","modules/clean/viewer","modules/clean/react/app_directory/details_page/context","modules/clean/react/app_directory/connect/handler_mapping","modules/clean/react/app_directory/connect/handler_utils","modules/clean/react/app_directory/page_template/context"],(function(e,t,n,o,r,a,i,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeConnectButtonFlow=t.useConnectButtonFlow=void 0,o=n.__importStar(o),a=n.__importStar(a),t.useConnectButtonFlow=function(){var e=d.usePageContext(),t=e.pageletInfo,n=e.userId,r=l.useUserLinkContext().connectionInfo;return o.useMemo((function(){return f(n,t,r)}),[n,t,r])};var s=r.intl.formatMessage({id:"oe1XOa",defaultMessage:"Contact your team admin to request this app. <a>Learn more</a>"},{a:function(e){return o.default.createElement("a",{href:"https://help.dropbox.com/teams-admins/team-member/find-admin",target:"_blank"},e)}}),m=r.intl.formatMessage({id:"tBfhno",defaultMessage:"Go to the admin console to allow this app."});function f(e,t,o){if(void 0===e)return{initialCta:"signedOut",onClick:function(){var e="/login?cont="+encodeURIComponent(a.get_href());a.redirect(e)}};if(void 0===o)return null;var r=void 0!==e&&(function(e){return i.Viewer.get_viewer().get_user_by_id(e).is_team_admin})(e),l=o.isTeamAdminDisabled,d=(function(e,t,n){var o=n.flow,r=n.isConnected;if(void 0===o)return(function(e,t){var n=u.defaultOnClick(e);if(e.installUrl)return{initialCta:"connect",onClick:n};if(e.thirdPartyLandingPage)return{initialCta:"learnMore",onClick:n};throw Error("Invalid app page configuration")})(t);return c.getFlowHandler(o)(e,t,r,o)})(e,t,o);return l?(function(e,t){return n.__assign(n.__assign({},e),{initialCta:"notAllowedByTeam",onClick:void 0,subtext:t?m:s})})(d,r):d}t.computeConnectButtonFlow=f}));
//# sourceMappingURL=flow.min.js-vfls_yOhT.map
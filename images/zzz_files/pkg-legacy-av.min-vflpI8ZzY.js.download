define("modules/clean/business/components/business_comparison_matrix",["require","exports","tslib","lodash","jquery"],(function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyComparisonMatrix=void 0,i=a.__importStar(i),s=a.__importDefault(s);var n=function(e,t,a){var n=this;this.handleChange=function(e){if(!e&&window.requestAnimationFrame)window.requestAnimationFrame((function(){n.handleChange(!0)}));else{var t=0;n.headerIsFixed&&(t=n.showUniversalNav?s.default(".universal-nav").height():s.default(".supernav__container").height());var a=n.$stickyHeader.outerHeight(),i=n.$window.scrollTop(),o=n.$compareTable.position().top-i-t,r=n.$lastHeader.position().top-i-a-t+8,c="";o<0?r>0&&(n.$compareTable.addClass("sticky"),c="translateY("+Math.min(-o,n.$compareTable.height()-a)+"px)"):(c="translateY(0)",n.$compareTable.removeClass("sticky")),n.$stickyHeader.css({transform:c,"-webkit-transform":c,"-ms-transform":c})}},this.headerIsFixed=!!t,this.showUniversalNav="V2"===a,this.$window=s.default(window),this.$compareTable=s.default(e),this.$lastHeader=this.$compareTable.find('[class*="breakdown__header"]').last(),this.$stickyHeader=this.$compareTable.find("thead"),this.$window.on("scroll",(function(e){n.handleChange(!1)}));var o=i.throttle(this.handleChange,25);this.$window.on("resize",(function(e){o(!1)})),s.default(this.handleChange)};t.StickyComparisonMatrix=n})),define("modules/clean/business/computer_carousel",["require","exports","tslib","jquery","lodash"],(function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputerCarousel=void 0,i=a.__importDefault(i),s=a.__importStar(s);var n=(function(e){var t=e.createElement("div");return t.style.hasOwnProperty("transition")?"transitionend":t.style.hasOwnProperty("WebkitTransition")?"webkitTransitionEnd":t.style.hasOwnProperty("MozTransition")?"transitionend":t.style.hasOwnProperty("OTransition")?"oTransitionEnd":"transitionend"})(document),o=(function(){function e(e){var t=this;this.onDocumentReady=function(){t.$window.on("resize",s.debounce(t.resizeCarouselHeight,500)),t.$bullets.on("click",t.onBulletClick),t.$carousel.find(".benefits-carousel__arrow").on("click",t.onArrowClick),t.resizeCarouselHeight()},this.onBulletClick=function(e){var a=i.default(e.currentTarget),s=parseInt(a.attr("data-index"),10);t.changeActiveElement(s)},this.onArrowClick=function(e){var a;e.preventDefault();var i=t.currentIndex;a=i===t.$bullets.length-1?0:i+1,t.changeActiveElement(a)},this.resizeCarouselHeight=function(){var e=0;t.$copyList.find(".copy-item").each((function(){var t=i.default(this).height();t>e&&(e=t)})),t.$copyList.height(e)},this.translateX=function(e,t){var a="translateX(-"+t+"%)";e.css({"-webkit-transform":a,"-ms-transform":a,transform:a})},this.changeActiveElementFn=function(e){if(t.currentIndex!==e){var a=t.currentIndex;t.$carousel.find(".active").removeClass("active"),t.bindItemsTransition(t.$copyList,t.$copyList.find(".copy-item"),e),t.bindItemsTransition(t.$imageList,t.$imageList.find(".image-item"),e),i.default(".benefits-carousel__gradient").removeClass("benefits-carousel__gradient--"+t.gradientMap[a]).addClass("benefits-carousel__gradient--"+t.gradientMap[e]),t.$bulletList.find("[data-index="+e+"]").addClass("active")}},this.bindItemsTransition=function(e,a,i){var s=!1;a.one(n,(function(n){var o=n.originalEvent.propertyName;if(t.elementTransitions.indexOf(o)>-1&&!s){s=!0;var r=a.length,c=0;i<=r-1&&(c=i/r*100),t.translateX(e,c),e.find("[data-index="+i+"]").addClass("active")}}))},this.$window=i.default(window),this.$carousel=i.default(e.idSelector),this.$imageList=this.$carousel.find(".image-list"),this.$copyList=this.$carousel.find(".copy-list"),this.$bulletList=this.$carousel.find(".bullet-list"),this.$bullets=this.$carousel.find(".bullet"),this._currentIndex=0,this.changeActiveElement=s.throttle(this.changeActiveElementFn,1e3),this.gradientMap=["orange","blue","yellow"],e.gradientMap&&e.gradientMap.length&&(this.gradientMap=e.gradientMap),this.elementTransitions=["opacity","bottom"],i.default(document).ready(this.onDocumentReady)}return Object.defineProperty(e.prototype,"currentIndex",{get:function(){var e=this.$bulletList.find(".active").attr("data-index");return e?(this._currentIndex=parseInt(e,10),this._currentIndex):this._currentIndex},enumerable:!1,configurable:!0}),e})();t.ComputerCarousel=o})),define("modules/clean/deprecated_pyxl/controllers/accordion",["require","exports","tslib","jquery","modules/core/browser"],(function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accordion=void 0,i=a.__importDefault(i),s=a.__importStar(s),t.Accordion=function(){i.default(".accordion-list__item").on("click",(function(e){i.default(e.currentTarget).addClass("active").siblings().removeClass("active")})),i.default(".accordion-list__item--closeable .accordion-list__heading").on("click",(function(e){var t=i.default(e.currentTarget).parent();t.hasClass("active")&&(t.removeClass("active"),e.stopPropagation())}));var e=s.get_hash();e&&(i.default("html, body").animate({scrollTop:i.default(e).offset().top-100},600),i.default(e).addClass("active").siblings().removeClass("active"))}})),define("modules/clean/snapengage",["require","exports","tslib","jquery","modules/clean/ncct/manual_assist_util","modules/core/browser","modules/core/cookies","modules/core/i18n","modules/core/uri","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/analytics","modules/clean/amp_web_logger","modules/clean/web_timing_logger","modules/clean/css","modules/clean/stormcrow/experiment","modules/clean/stormcrow/stormcrow_exposure_logger"],(function(e,t,a,i,s,n,o,r,c,h,p,l,d,u,g,m){"use strict";var f;Object.defineProperty(t,"__esModule",{value:!0}),t.initialize_module=t.DropboxSnapEngage=t.DropboxSnapEngageSingleton=t.ProactiveIdKeys=void 0,i=a.__importDefault(i),n=a.__importStar(n),(function(e){e.DiscoverExperiment="DISCOVER_EXPERIMENT",e.Test="TEST",e.Default="DEFAULT"})(t.ProactiveIdKeys||(t.ProactiveIdKeys={})),(function(e){e.DEFAULT="d5c1efed-d0ef-4fca-8c7d-faff398ad272",e.TEST="d4fc2e96-d0eb-45c4-a48f-4526366894ca",e.DISCOVER_EXPERIMENT="ec36c6a5-a14c-43c0-920d-918cc8629527"})(f||(f={}));var v=(function(){function e(){var e=this;this.chatData={FirstName:"",LastName:"",Email:"",SessionID:"",Country:"",MktoInfo:"",pricing:void 0,user_id:"",proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:"",pageLoadTs:"",chatHmac:"",cxChatbotName:void 0,ncct:"",serviceTier:"",tags:"",phoneSupportForPlusUsers:void 0,supportExperimentShowOnboardingNumber:void 0,supportExperimentHideEmailOption:void 0,supportExperimentBasic36HourSla:void 0,phoneSupportForProfessionalUsers:void 0,supportExperimentProfessionalPhoneSupportedLanguages:void 0},this.chatRequested=!1,this.experiments={},this.loaded=!1,this.ttiFallbackTimeout=1e4,this.hasUpdatedChatStatus=!1,this.updateChatData=function(){e.sendMessage({message_type:"UpdateChatData",chatData:e.chatData}),e.sendMessage({message_type:"AllowProactiveChat",allowProactiveChat:e.allowProactiveChat})},this.handleIframeLoad=function(){e.logChatAction("snapengage_loaded",{total_time:(new Date).valueOf()-e.startTime.valueOf()}),e.loaded=!0;var t=e.getSnapEngageIframe();e.iFrameLeftStyle=t&&t.style.left,e.sendMessage({message_type:"createSnapEngageScript",chatId:e.supportChatId,allowProactiveChat:e.allowProactiveChat,chatData:e.chatData}),e.getChatVisibleCookie()&&e.showSnapEngageIframe(!0)},this.checkChatStatus=function(){e.chatRequested||e.sendMessage({message_type:"checkChatStatus",chatData:e.chatData,isSupport:void 0!==e.supportChatId})},this.receiveMessage=function(t){if(e.validOriginURL(t.origin))if("Close"===t.data.message_type)e.hideSnapEngageIframe(),e.chatRequested=!1,e.logCloseEvent(t.data);else if("Minimize"===t.data.message_type)e.minimizeSnapEngageIframe(t.data.rect);else if("Maximize"===t.data.message_type)e.maximizeSnapEngageIframe(t.data.rect);else if("ChatMessageReceived"===t.data.message_type)e.showSnapEngageIframe();else if("Open"===t.data.message_type)e.supportChatId=t.data.chatId,e.chatRequested=!0,e.showSnapEngageIframe(),e.updateChatStatus(!0);else if("OpenProactive"===t.data.message_type){e.supportChatId=t.data.chatId,e.showAndLogProactiveChat();var a=e,i=a.experimentNameToLog,n=a.experimentVariantToLog;i&&n&&_({experiment:e.constructExperimentObject(i),whitelist:[n]})}else"EndProactiveChat"===t.data.message_type?(e.hideSnapEngageIframe(),e.chatRequested=!1,e.logChatAction("proactive_chat_ended")):"StartChat"===t.data.message_type?(e.setChatVisibleCookie(t.data.chatId),"proactive"===t.data.type?(s.isNCCTChat(e.supportChatId)&&h.WebRequest({url:"/team/admin/engaged_chat",data:{chatId:e.supportChatId}}),e.logChatAction("proactive_chat_initiated")):"manual"===t.data.type&&e.logChatAction("reactive_chat_initiated")):"UpdateChatStatus"===t.data.message_type?e.updateChatStatus(t.data.online):"SnapEngageInitialized"===t.data.message_type&&e.getChatVisibleCookie()&&(e.chatData.user_id&&e.chatData.chatHmac&&e.sendMessage({message_type:"updateHmac",chatData:e.chatData}),e.showSnapEngageIframe(),e.sendMessage({message_type:"checkResize"}))},this.constructExperimentObject=function(t){return{name:t,variant:e.getExperimentVariant(t)}},this.showAndLogProactiveChat=function(){e.chatRequested=!0,e.showSnapEngageIframe(),e.logChatAction("proactive_chat_opened")}}return e.prototype.registerExperiments=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.experiments[t]=e[t])},e.prototype.resume=function(e){var t=this;top===window&&(this.logChatAction("chat_persistence_init"),d.waitForTTI({timeoutMS:this.ttiFallbackTimeout}).then((function(){t._resume(e)})))},e.prototype._resume=function(e){this.cookieName=e.cookieName,this.cookieDomain=e.cookieDomain;var t=this.getChatVisibleCookie();!this.inflight&&t&&(this.logChatAction("chat_persistence"),this.initializeParams(e),this.pageInit())},e.prototype.pageInit=function(){var e=this;window.addEventListener("message",this.receiveMessage,!1),this.inflight=u.require_css("/static/css/business/components/snap_engage-vflfz1ZQW.css",(function(){e.createIframe()}))},e.prototype.init=function(e){this.initializeParams(e),this.inflight?this.inflight.then(this.updateChatData):this.pageInit()},e.prototype.initializeParams=function(e){this.cookieName=e.cookieName,this.cookieDomain=e.cookieDomain,this.snapEngageIframeOrigin=e.snapEngageIframeOrigin,this.chatData={FirstName:e.firstName,LastName:e.lastName,Email:e.email,SessionID:e.sessionId,Country:e.countryCode,MktoInfo:e.marketoInfo,pricing:this.chatData.pricing,user_id:e.userId,proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:"",pageLoadTs:e.pageLoadTs,chatHmac:e.chatHmac,cxChatbotName:e.cxChatbotName,ncct:this.getExperimentVariant("subgrowth_biz_no_cc_trials_team_based")||this.getExperimentVariant("subgrowth_biz_no_cc_trials")||"OFF",serviceTier:e.serviceTier,tags:e.tags,phoneSupportForPlusUsers:e.phoneSupportForPlusUsers,supportExperimentShowOnboardingNumber:e.supportExperimentShowOnboardingNumber,supportExperimentHideEmailOption:e.supportExperimentHideEmailOption,supportExperimentBasic36HourSla:e.supportExperimentBasic36HourSla,phoneSupportForProfessionalUsers:e.phoneSupportForProfessionalUsers,supportExperimentProfessionalPhoneSupportedLanguages:e.supportExperimentProfessionalPhoneSupportedLanguages,proactiveIdKey:e.proactiveIdKey},this.hasUpdatedChatStatus=!1,this.isVisible=!1,this.iFrameLeftStyle=null,this.allowProactiveChat=e.allowProactiveChat,this.supportChatId=e.supportChatId,this.chatIsMinimized=e.chatIsMinimized,this.agentMustBeOnline=e.agentMustBeOnline,this.registerPricingsAsDisplayed(e.pricings),this.experimentNameToLog=e.experimentNameToLog,this.experimentVariantToLog=e.experimentVariantToLog,this.startTime=new Date},e.prototype.startSupportChat=function(e){s.isNCCTChat(e)?h.WebRequest({url:"/team/admin/engaged_chat",data:{chatId:e}}):s.markSupportChatStarted(),this.chatRequested=!0,this.logChatAction("support_chat_initiated",{},e),this.showSnapEngageIframe(),this.sendMessage({message_type:"startSupportChat",chatData:this.chatData,support_widget_id:e})},e.prototype.startReactiveChat=function(){this.chatRequested||(this.chatRequested=!0,this.logChatAction("chat_initiated"),this.showSnapEngageIframe(),this.sendMessage({message_type:"StartChat",chatData:this.chatData}))},e.prototype.startMinimizedChat=function(){if(!this.chatRequested){this.chatRequested=!0,this.showSnapEngageIframe(),this.minimizeSnapEngageIframe();var e=this.experimentNameToLog,t=this.experimentVariantToLog;e&&t&&_({experiment:this.constructExperimentObject(e),whitelist:[t]}),this.logChatAction("minimized_chat_initiated")}},e.prototype.registerPricingsAsDisplayed=function(e){var t=this;if(void 0!==e&&0!==e.length){var a=e.map((function(e){var a=e.product+" "+e.country+"v"+e.price_version+" "+e.price,i=t.getNumberOfLicenses(e.licenses);return 1===i?a+=" (1 license)":i>1&&(a=a+" ("+i+" licenses_count)"),a}));this.chatData.pricing=a.join(),this.loaded&&this.sendMessage({message_type:"checkChatStatus",chatData:this.chatData,isSupport:void 0!==this.supportChatId})}},e.prototype.getSnapengageChatId=function(){if(this.supportChatId)return this.supportChatId;if(this.chatData)switch(this.chatData.proactiveIdKey){case"DISCOVER_EXPERIMENT":return f.DISCOVER_EXPERIMENT;case"TEST":return f.TEST}return f.DEFAULT},e.prototype.logChatAction=function(e,t,i){var s=i||this.getSnapengageChatId(),o={chat_widget_id:s,url:n.get_href()},r=a.__assign(a.__assign({},o),t);p.TeamsWebActionsLogger.log(e,r),l.AMPWebLogger.logEventCount("chat_events",e,{chat_widget_id:s})},e.prototype.createIframe=function(){var e=n.get_uri(),t=c.URI.parse(this.snapEngageIframeOrigin),a=document.createElement("iframe");return e.setScheme(t.getScheme()),e.setAuthority(t.getAuthority()),a.src=e.toString(),a.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-forms"),a.setAttribute("class","snapengage-iframe"),a.setAttribute("id","snapengage-iframe"),a.setAttribute("allowTransparency","true"),a.setAttribute("title",r.intl.formatMessage({id:"um0219",defaultMessage:"Live chat box"})),a.setAttribute("tabindex","1"),a.addEventListener("load",this.handleIframeLoad),document.body.insertBefore(a,document.body.childNodes[0]),setInterval(this.checkChatStatus,13e4),a},e.prototype.sendMessage=function(e){var t=this.getSnapEngageIframe();t&&t.contentWindow&&t.contentWindow.postMessage(e,this.snapEngageIframeOrigin)},e.prototype.validOriginURL=function(e){return e===this.snapEngageIframeOrigin},e.prototype.getSnapEngageIframe=function(){return document.getElementById("snapengage-iframe")},e.prototype.updateChatStatus=function(e){i.default("[data-snap-engage-visibility]").hide(),e?i.default('[data-snap-engage-visibility="online"]').show():i.default('[data-snap-engage-visibility="offline"]').show(),!this.chatRequested&&this.chatIsMinimized&&(!this.agentMustBeOnline||this.hasUpdatedChatStatus||e||(this.logChatAction("chat_agent_must_be_online_but_was_offline"),this.hasUpdatedChatStatus=!0),(!this.agentMustBeOnline||this.agentMustBeOnline&&e)&&this.startMinimizedChat())},e.prototype.showSnapEngageIframe=function(e){void 0===e&&(e=!1);var t=this.getSnapEngageIframe();t&&(t.style.display="inline",t.style.left=e?"99999px":this.iFrameLeftStyle,this.isVisible=!0)},e.prototype.hideSnapEngageIframe=function(){this.isVisible=!1,this.resetChatVisibleCookie(),this.getSnapEngageIframe()&&(this.getSnapEngageIframe().style.display="none")},e.prototype.minimizeSnapEngageIframe=function(e){var t=e?Math.max(e.width,80):80,a=e?Math.max(e.height,80):80;this.getSnapEngageIframe()&&this.isVisible&&(this.getSnapEngageIframe().style.width=t+"px",this.getSnapEngageIframe().style.height=a+"px")},e.prototype.maximizeSnapEngageIframe=function(e){if(this.getSnapEngageIframe()){var t=(e||{}).width,a=(e||{}).height;this.getSnapEngageIframe().style.width=t?t+"px":"",this.getSnapEngageIframe().style.height=a?a+"px":""}},e.prototype.getChatVisibleCookie=function(){return!!this.cookieName&&o.Cookies.read(this.cookieName)},e.prototype.setChatVisibleCookie=function(e){this.cookieName&&this.cookieDomain&&o.Cookies.create(this.cookieName,e,1,this.cookieDomain)},e.prototype.resetChatVisibleCookie=function(){this.cookieName&&o.Cookies.delete(this.cookieName)},e.prototype.getExperimentVariant=function(e){return this.experiments.hasOwnProperty(e)?this.experiments[e]:void 0},e.prototype.getNumberOfLicenses=function(e){var t=this.getExperimentVariant("subgrowth_biz_payment_no_min_license");return"MIN2"===t?2:"MIN3"===t?3:"MIN3B"===t?3:e},e.prototype.logCloseEvent=function(e){if("Close"===e.message_type){var t=e.type,a=e.agent_status;this.logChatAction("snapengage_chat_close",{type:t,agent_status:a})}},e})();function _(e){var t,a=e.experiment,i=a.name,s=a.variant,n=e.whitelist;s&&(t=g.Experiment(s)).variantIn.apply(t,n)&&(new m.StormcrowExposureLogger).logExposure(i,s)}t.DropboxSnapEngageSingleton=v,t.DropboxSnapEngage=new v;var C=function(e){var t=e.params,a=t.experimentNameToLog,i=t.experimentVariantToLog,s=t.logControlAfterMilliseconds,n=parseInt(s,10);setTimeout((function(){_({experiment:{name:a,variant:i},whitelist:["CONTROL"]})}),n)};t.initialize_module=function(e){e.resume?t.DropboxSnapEngage.resume(e.params):!(function(e){var t=e.params,a=t.experimentNameToLog,i=t.experimentVariantToLog;return!!t.logControlAfterMilliseconds&&!!i&&!!a&&"CONTROL"===i})(e)?(t.DropboxSnapEngage.registerExperiments(e.experiments),t.DropboxSnapEngage.init(e.params)):C(e)}}));
//# sourceMappingURL=pkg-legacy-av.min.js-vfl9T7pxl.map
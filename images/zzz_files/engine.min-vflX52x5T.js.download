define(["require","exports","tslib"],(function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PrefixSearchEngine=void 0;var t=[{name:"name",value:function(e){return e.name}},{name:"shortDescription",value:function(e){return e.shortDescription}},{name:"longDescription",value:function(e){return e.longDescription}},{name:"company",value:function(e){return e.company}},{name:"collections",value:function(e){var n=[];return e.collections.forEach((function(e){n.push(e.name),n.push(e.description)})),n}}],i=(function(){function e(e){this.appInfos=new Map(e.map((function(e){return[e.pageId,e]}))),this.appInfosSearchData=this.getSearchData(e)}return e.prototype.search=function(e,n){var t=this;return new Promise((function(i){return r.__awaiter(t,void 0,void 0,(function(){var t,o,a,u=this;return r.__generator(this,(function(r){return e=e.toLowerCase(),(t=this.querySearchData(e)).sort((function(e,n){return e.priority-n.priority})),o=n?t.slice(0,n):t,a=o.map((function(e){return u.appInfos.get(e.pageId)})).filter((function(e){return void 0!==e})),i(a),[2]}))}))}))},e.prototype.querySearchData=function(e){var n=this,r=[];return this.appInfosSearchData.forEach((function(t){var i=n.getSearchResult(e,t);i&&r.push(i)})),r},e.prototype.getSearchResult=function(e,n){for(var r=0;r<n.fields.length;r++){var t=n.fields[r];if(void 0!==t&&-1!==t.indexOf(e))return{pageId:n.pageId,priority:r}}},e.prototype.getSearchData=function(e){var n=this;return e.map((function(e){var r=[];return t.forEach((function(t){var i=t.value(e);"string"==typeof i?r.push(n.normalizeField(i)):i.forEach((function(e){return r.push(n.normalizeField(e))}))})),{pageId:e.pageId,fields:r}}))},e.prototype.normalizeField=function(e){return null==e?void 0:e.toLocaleLowerCase()},e})();n.PrefixSearchEngine=i}));
//# sourceMappingURL=engine.min.js-vflG9Vh1t.map
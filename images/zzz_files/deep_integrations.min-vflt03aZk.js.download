define(["require","exports","tslib","modules/clean/react/app_directory/page_template/logger","modules/clean/integrations/link_service","modules/clean/api_v2/user_client","modules/clean/react/app_directory/connect/handler_utils"],(function(e,t,n,r,i,a,o){"use strict";function s(e,t,o){return n.__awaiter(this,void 0,Promise,(function(){var s,c,l;return n.__generator(this,(function(n){switch(n.label){case 0:if(!(s=t))return[3,5];r.logTelemetryEvent("partner_auth_modal_shown",{app_id:r.getAppId(o)}),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,i.linkService(e,s,null)];case 2:return n.sent(),[4,(new a.UserApiV2Client).ns("profile_services").rpc("list_services",void 0,{subjectUserId:e})];case 3:return c=n.sent(),(l=c.services.find((function(e){return e.service_type[".tag"]===s})))&&"is_connected"===l.connection_state[".tag"]?(r.logTelemetryEvent("partner_auth_allow",{app_id:r.getAppId(o)}),[2,!0]):[2,!1];case 4:return n.sent(),[3,5];case 5:return[2,!1]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.authForDeepIntegration=t.deepIntegrationsHandler=void 0,t.deepIntegrationsHandler=function(e,t,r,i){return{initialCta:r?"learnMore":"connect",onClick:o.withEduModal((function(a){return n.__awaiter(void 0,void 0,void 0,(function(){var o;return n.__generator(this,(function(n){switch(n.label){case 0:return r?[2,!0]:[4,s(e,i.id,t.appIdentifiers)];case 1:return(o=n.sent())&&a.setAppConnectionState(!0),[2,o]}}))}))}),t,i.edu_modal_content)}},t.authForDeepIntegration=s}));
//# sourceMappingURL=deep_integrations.min.js-vflV_Pi93.map